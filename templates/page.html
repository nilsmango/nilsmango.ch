{% extends "base.html" %}
{% block title %}{{ page.title }} - {{ config.title }}{% endblock title %}
{% block description %}{{ page.description | default(value=config.description) }}{% endblock description %}

{% block ogp_head %}
    {% if config.extra.ogp.locale %}
    <meta property="og:locale" content="{{ config.extra.ogp.locale }}">
    {% endif %}
    <meta name="author" content="Nils Mango">
    <meta property="og:title" content="{{ page.title }}">
    {% if page.taxonomies.categories %}
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="{{ page.date }}">
    {% if page.taxonomies.tags %}
    {% for tag in page.taxonomies.tags %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% endif %}
    {% if page.updated %}
    <meta property="article:modified_time" content="{{ page.updated }}">
    {% endif %}
    {% else %}
    <meta property="og:type" content="website">
    {% endif %}
    <meta property="og:url" content="{{ page.permalink | safe }}">
    {% if page.extra.featured_image %}
    {% set page_permalink = page.permalink | safe %}
    <meta property="og:image" content="{{ page_permalink ~ page.extra.featured_image }}">
    {% if page.extra.featured_image_alt %}
    <meta property="og:image:alt" content="{{ page.extra.featured_image_alt }}">
    {% endif %}
    {% else %}
    <meta property="og:image" content="{{ config.base_url }}/ogpic.jpg">
    {% endif %}
    {% if page.summary %}
    <meta property="og:description" content="{{ page.summary | striptags }} ...">
    {%- elif page.description %}
    <meta property="og:description" content="{{ page.description | safe }}  ...">
    {%- elif page.content %}
    <meta property="og:description" content="{{ page.content | striptags | truncate(length=54) | safe }}">

    {% endif %}
{% endblock %}

{% block content %}
<h1 class="title">
  {{ page.title }}
</h1>
{% if page.taxonomies.categories %}
<p class="post-dates">Posted on <time datetime="{{ page.date | date(format="%+") }}">{{ page.date | date(format="%B %d, %Y") }}</time>
{% if page.updated %}
<span class="divider">|</span><span class="post-updated"> Updated: <time datetime="{{ page.updated | date(format="%+") }}">{{ page.updated | date(format="%B %d, %Y") }}</time></span></p>
{% endif %}
{% endif %}
{{ page.content | safe }}
{% endblock content %}

{%- block gotop %}
{%- if page.reading_time %}
{%- if page.reading_time > 2 %}
<p class="top"><a href="#"  title="back to top">⇡</p>
{%- endif %}
{%- endif %}
{%- endblock gotop %}
